<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ± â€” B.S Medical &amp; Aesthetic</title>

  <style>
    :root{
      --bg:#f7f7fb;
      --card:#ffffff;
      --text:#0f172a;
      --muted:#64748b;
      --stroke:rgba(15,23,42,.10);
      --shadow:0 18px 50px rgba(2,6,23,.12);
      --radius:18px;

      --gold:#b08d57;
      --gold2:#d7b97a;

      --ok:#16a34a;
      --warn:#f59e0b;
      --bad:#dc2626;

      --max:1100px;
    }

    *{box-sizing:border-box}
    html,body{margin:0;padding:0}
    body{
      font-family:system-ui, -apple-system, "Segoe UI", Tahoma, Arial;
      background:
        radial-gradient(900px 500px at 10% 10%, rgba(176,141,87,.18), transparent 55%),
        linear-gradient(180deg,#fff,var(--bg));
      color:var(--text);
    }

    .wrap{
      max-width:var(--max);
      margin:auto;
      padding:18px;
    }

    .topbar{
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap:12px;
      padding:14px;
      background:#fff;
      border-radius:18px;
      border:1px solid var(--stroke);
      box-shadow:var(--shadow);
      margin-bottom:18px;
      flex-wrap:wrap;
    }

    h1{margin:0;font-size:20px;font-weight:1000}
    .sub{font-size:12px;color:var(--muted);font-weight:900}

    .btn{
      padding:10px 14px;
      border-radius:14px;
      border:1px solid rgba(176,141,87,.35);
      background:linear-gradient(135deg, rgba(176,141,87,.18), rgba(215,185,122,.14));
      font-weight:1000;
      cursor:pointer;
    }
    .btn.secondary{
      background:#fff;
      border-color:var(--stroke);
    }

    .filters{
      display:grid;
      grid-template-columns:repeat(4,1fr);
      gap:10px;
      margin-bottom:16px;
    }

    select,input{
      width:100%;
      padding:10px;
      border-radius:12px;
      border:1px solid var(--stroke);
      font-size:14px;
    }

    @media(max-width:800px){
      .filters{grid-template-columns:repeat(2,1fr)}
    }
    @media(max-width:480px){
      .filters{grid-template-columns:1fr}
    }

    .cards{
      display:grid;
      grid-template-columns:repeat(4,1fr);
      gap:14px;
      margin-bottom:20px;
    }

    .card{
      background:#fff;
      border-radius:18px;
      padding:16px;
      border:1px solid var(--stroke);
      box-shadow:var(--shadow);
    }

    .card h3{
      margin:0;
      font-size:13px;
      color:var(--muted);
      font-weight:900;
    }
    .card .num{
      margin-top:6px;
      font-size:22px;
      font-weight:1000;
    }

    @media(max-width:900px){
      .cards{grid-template-columns:repeat(2,1fr)}
    }
    @media(max-width:480px){
      .cards{grid-template-columns:1fr}
    }

    .section{
      background:#fff;
      border-radius:18px;
      padding:16px;
      border:1px solid var(--stroke);
      box-shadow:var(--shadow);
      margin-bottom:16px;
    }

    table{
      width:100%;
      border-collapse:collapse;
      font-size:13px;
    }
    th,td{
      padding:8px;
      border-bottom:1px solid var(--stroke);
      text-align:center;
    }
    th{
      background:rgba(176,141,87,.08);
      font-weight:1000;
    }

    footer{
      text-align:center;
      margin:24px 0;
      font-size:12px;
      color:var(--muted);
      font-weight:900;
    }
  </style>
</head>

<body>

<div class="wrap">

  <!-- Topbar -->
  <div class="topbar">
    <div>
      <h1>ğŸ“Š Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ±</h1>
      <div class="sub">Ù†Ø¸Ø±Ø© Ø´Ø§Ù…Ù„Ø© Ø¹Ù„Ù‰ Ø£Ø¯Ø§Ø¡ Ø§Ù„Ù†Ø´Ø§Ø·</div>
    </div>
    <a href="dashboard.html" class="btn secondary">â¬… Ø±Ø¬ÙˆØ¹ Ù„Ù„Ø¯Ø§Ø´ Ø¨ÙˆØ±Ø¯</a>
  </div>

  <!-- Filters -->
  <div class="filters">
    <select id="type">
      <option value="all">ÙƒÙ„ Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ±</option>
      <option value="sales">Ù…Ø¨ÙŠØ¹Ø§Øª</option>
      <option value="purchases">Ù…Ø´ØªØ±ÙŠØ§Øª</option>
      <option value="expenses">Ù…ØµØ±ÙˆÙØ§Øª</option>
      <option value="inventory">Ù…Ø®Ø²ÙˆÙ†</option>
    </select>

    <input type="date" id="from">
    <input type="date" id="to">

    <button class="btn" onclick="loadReports()">ØªØ­Ø¯ÙŠØ« Ø§Ù„ØªÙ‚Ø±ÙŠØ±</button>
  </div>

  <!-- Summary Cards -->
  <div class="cards">
    <div class="card">
      <h3>Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª</h3>
      <div class="num" id="salesTotal">0</div>
    </div>
    <div class="card">
      <h3>Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø´ØªØ±ÙŠØ§Øª</h3>
      <div class="num" id="purchasesTotal">0</div>
    </div>
    <div class="card">
      <h3>Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…ØµØ±ÙˆÙØ§Øª</h3>
      <div class="num" id="expensesTotal">0</div>
    </div>
    <div class="card">
      <h3>ØµØ§ÙÙŠ Ø§Ù„Ø±Ø¨Ø­ (ØªÙ‚Ø¯ÙŠØ±ÙŠ)</h3>
      <div class="num" id="profitTotal">0</div>
    </div>
  </div>

  <!-- Details -->
  <div class="section">
    <h3>ØªÙØ§ØµÙŠÙ„ Ù…Ø®ØªØµØ±Ø©</h3>
    <table>
      <thead>
        <tr>
          <th>Ø§Ù„Ù†ÙˆØ¹</th>
          <th>Ø¹Ø¯Ø¯ Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª</th>
          <th>Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ</th>
        </tr>
      </thead>
      <tbody id="detailsTable">
        <tr>
          <td colspan="3">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª</td>
        </tr>
      </tbody>
    </table>
  </div>

</div>

<footer>
  Axentro Â© 2024 â€” By Ahmed Hamouda
</footer>

<script>
/* ===== AUTH ===== */
if(sessionStorage.getItem("AX_BO_OK") !== "1"){
  location.replace("login.html");
}

/* ===== MOCK DATA (Ù…Ø¤Ù‚Øª) =====
   Ù„Ø§Ø­Ù‚Ù‹Ø§ Ù‡ÙŠØªØ±Ø¨Ø· Ø¨Ù€ Google Sheets
*/
const sales = JSON.parse(localStorage.getItem("AX_SALES") || "[]");
const purchases = JSON.parse(localStorage.getItem("AX_PURCHASES") || "[]");
const expenses = JSON.parse(localStorage.getItem("AX_EXPENSES_LOCAL_V1") || "[]");

function sum(arr){ return arr.reduce((s,x)=>s+(Number(x.total||x.amount||0)),0); }

function loadReports(){
  const salesSum = sum(sales);
  const purchasesSum = sum(purchases);
  const expensesSum = sum(expenses);
  const profit = salesSum - purchasesSum - expensesSum;

  document.getElementById("salesTotal").textContent = salesSum.toFixed(2);
  document.getElementById("purchasesTotal").textContent = purchasesSum.toFixed(2);
  document.getElementById("expensesTotal").textContent = expensesSum.toFixed(2);
  document.getElementById("profitTotal").textContent = profit.toFixed(2);

  const tbody = document.getElementById("detailsTable");
  tbody.innerHTML = `
    <tr>
      <td>Ù…Ø¨ÙŠØ¹Ø§Øª</td>
      <td>${sales.length}</td>
      <td>${salesSum.toFixed(2)}</td>
    </tr>
    <tr>
      <td>Ù…Ø´ØªØ±ÙŠØ§Øª</td>
      <td>${purchases.length}</td>
      <td>${purchasesSum.toFixed(2)}</td>
    </tr>
    <tr>
      <td>Ù…ØµØ±ÙˆÙØ§Øª</td>
      <td>${expenses.length}</td>
      <td>${expensesSum.toFixed(2)}</td>
    </tr>
  `;
}

loadReports();
</script>

</body>
</html>
